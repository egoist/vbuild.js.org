# Config

Config can be passed in from command-line or your configuration file, vbuild will automatically `vue.config.js` if they exist, alternatively you can use `--config` to specific a custom path to your config file.

One more thing, you can write the config file in full featured ESnext syntax just like the way you write your app with vbuild. Config file are loaded with babel using `es2015` and `stage-2` presets.

## Default config

The default config file generated by `vbuild init`:

```js
export default {
  // show in html title and cli output
  title: 'my project',
  // resolve ./src dir
  // so that you can do `import 'components/MyComponent'` directly
  resolve: true
}
```

<!-- toc -->

## Shared options

The shared options affect `vbuild`  `vbuild --dev` `vbuild --watch`

name|default|description
---|---|---
dev|`false`|Run in development mode
entry|`./src/index.js`|Entry point of your app
dist|`./dist`|Dist folder of bundled files
title|`vbuild app`|Title in the index.html
template|(built-in)|Path to the template for index.js
templates|`undefined`|An array of html-webpack-plugin options, this will override `title` and `template` option
cjs|`false`|Bundle in `CommonJS` format
umd|`false`|Bundle in `umd` format and set a moduleName
cssModules|`false`|Use css-modules to load css files
filename|`client`|Name of bundled files, without extension
notify|`true`|Notify when compilation is done
electron|`false`|Run in electron mode
html|`true`|Generate HTML files
alias|undefined|Add resolve alias
resolve|undefined|Resolve dependencies in ./src path or a custom path
target|webpack target|eg: node
vendor|[]|Split modules or files in vendor chunk, for better caching
externals|undefined|Exclude specifed files or modules from bundled file, should be an array
static|{from: 'static', to: './'}|copy files in ./static to the root of dist directory, use an array if you wanna copy more directories.
config|`./vue.config.js`|Path to config file, set to `false` to disable it

## Production options

Prudction mode indicates no `--dev` `--watch`

name|default|description
---|---|---
devtool|`source-map`|Devtool
compress|`true`|Compress bundled files
clean|`true`|Remove dist folder before bundling
hash|`true`|Add hash to file name
publicPath|`/`|Set the publicPath to static files, use this when you put your website in a subdirectory

## Development options

Development indicates one of `--dev` and `--watch`

name|default|description
---|---|---
devtool|`eval-source-map`|Devtool
port|4000|The port for dev server
live|`false`|Live reloading instead hot reloading (dev mode only)
open|`false`|Open app in browser
host|`localhost`|The hostname for dev server
hot|`['client']`|Add hot-reload client to client entry or custom entries
devServer|`undefined`|A function that takes the `express()` server as the argument, eg, you can use this function to add a proxy middleware 

## PostCSS options

name|default|description
---|---|---
postcss.autoprefixer|undefined|Autoprefixer options
postcss.use|['autoprefixer', 'postcss-nested']|PostCSS plugins
postcss.append|true|Append your plugins to built-in plugins

There are two ways of define postcss options:

```js
// vue.config.js
export default {
  postcss: {
    use: ['postcss-cssnext'],
    'postcss-cssnext': {}, // options for that plugin
    append: false
  }
}
// or use postcss api directly
export default {
  postcss(webpack) {
    return [] // plugins
  }
}
```

## Babel options

name|default|description
---|---|---
babel|See below|Babel options

```js
{
  "presets: [["es2015", {"modules": false}], "stage-2"],
  "plugins": ["transform-runtime", "transform-vue-jsx"]
}
```

If you wanna override this you need to `require.resolve` in your config file:

```js
export default {
  babel: {
    presets: [
      [require.resolve('babel-preset-es2015'), {modules: false}],
      require.resolve('babel-preset-stage-0')
    ]
  }
}
```

Babel can also read config from `.babelrc`, if you're using it that way make sure to install presets and plugins in your project directory. To disable `.babelrc`, simply:

```js
export default {
  babel: {
    babelrc: false
  }
}
```

Note: change babel options for your app won't affect the options we use to load config file.

## Merge Webpack config

For advanced usage, you can merge your webpack config into the default one vbuild uses, simply use `--merge-config ./my.webpack.config.js` option.

You can also use an object as its value:

```js
export default {
  mergeConfig: {
    // following options will be merged
    module: {loaders: [/*...*/]},
    plugins: [myPlugin()]
  }
}

// or an array for merging multiple webpack config
export default {
  mergeConfig: [
    a, b, c //...
  ]
}
```

We are using [webpack-merge](https://github.com/survivejs/webpack-merge) to finish the job, be sure to check out the usage there before this.

For example, if you wanna override the webpack loader for js files, do:

```js
export default {
  mergeConfig: {
    module: {
      loaders: [
        {
          test: /\.js$/,
          loaders: ['react-hot', 'babel'],
          exclude: [/node_modules/]
        }
      ]
    }
  }
}
```

BTW, you can directly `require('webpack')` and all vbuild's [dependencies](https://github.com/egoist/vbuild/blob/master/package.json) without installing them again in your project.
